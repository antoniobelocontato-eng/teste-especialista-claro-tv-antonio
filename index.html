<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CineClaro - Intelig√™ncia de Vendas 2026</title>
    <style>
        :root { 
            --claro-red: #ee1d23; 
            --deep-black: #0a0a0a; 
            --surface: #1a1a1a; 
            --accent-gold: #ffd700;
        }

        body { 
            background: radial-gradient(circle at top, #3a0000 0%, #0a0a0a 100%) fixed; 
            color: white; 
            font-family: 'Inter', sans-serif; 
            margin: 0; 
            padding: 20px; 
        }
        
        /* Barra de Busca */
        .search-container { max-width: 800px; margin: 0 auto 30px; display: flex; gap: 10px; }
        .search-input { flex-grow: 1; padding: 15px; border-radius: 50px; border: 1px solid #444; background: rgba(0,0,0,0.3); color: white; outline: none; }
        .btn-search { background: var(--claro-red); border: none; border-radius: 50px; padding: 0 25px; color: white; font-weight: bold; cursor: pointer; }

        /* Navega√ß√£o e Filtros */
        .header-nav { display: flex; flex-wrap: wrap; gap: 15px; margin-bottom: 40px; justify-content: center; align-items: center; }
        
        .btn-coming-soon { background: var(--accent-gold); color: black; padding: 15px 25px; border: none; border-radius: 50px; cursor: pointer; font-weight: bold; transition: 0.3s; }
        .btn-coming-soon:hover { transform: scale(1.05); box-shadow: 0 0 20px rgba(255, 215, 0, 0.4); }

        .dropbtn { background: #222; color: white; padding: 15px 25px; border: 1px solid var(--claro-red); border-radius: 8px; cursor: pointer; font-weight: bold; height: 55px; }
        .dropdown { position: relative; display: inline-block; }
        .dropdown-content { display: none; position: absolute; background: #222; min-width: 220px; z-index: 100; border-radius: 8px; box-shadow: 0 8px 16px rgba(0,0,0,0.5); top: 100%; left: 0; }
        .dropdown-content a { color: white; padding: 15px; text-decoration: none; display: block; border-bottom: 1px solid #333; cursor: pointer; }
        .dropdown-content a:hover { background: #333; color: var(--claro-red); }
        .dropdown:hover .dropdown-content { display: block; }

        .streaming-filters { display: flex; gap: 10px; flex-wrap: wrap; justify-content: center; }
        .btn-filter-logo { background: #000; border: 1px solid #444; border-radius: 12px; cursor: pointer; width: 70px; height: 55px; padding: 5px; transition: 0.3s; display: flex; align-items: center; justify-content: center; }
        .btn-filter-logo.active { border-color: var(--claro-red); box-shadow: 0 0 15px var(--claro-red); background: rgba(238, 29, 35, 0.1); }
        .btn-filter-logo img { width: 100%; height: 100%; object-fit: contain; }

        /* Grid 5 em Linha */
        .grid-layout { display: grid; grid-template-columns: repeat(5, 1fr); gap: 15px; margin-bottom: 50px; }
        
        /* Card Estruturado */
        .card { background: var(--surface); border-radius: 15px; overflow: hidden; display: flex; flex-direction: column; border: 1px solid #333; position: relative; transition: 0.3s; }
        .card:hover { transform: translateY(-5px); border-color: var(--claro-red); }

        .streaming-frame { background: #000; padding: 8px; display: flex; justify-content: center; gap: 8px; border-bottom: 2px solid var(--claro-red); min-height: 35px; align-items: center; }
        .mini-logo { width: 25px; height: 25px; border-radius: 4px; object-fit: contain; }
        
        .release-badge { position: absolute; top: 55px; right: 10px; background: var(--claro-red); padding: 5px 10px; border-radius: 5px; font-size: 0.7rem; font-weight: bold; z-index: 5; box-shadow: 0 2px 5px rgba(0,0,0,0.5); }

        .card-poster { width: 100%; aspect-ratio: 2/3; object-fit: cover; background: #000; }
        .card-content { padding: 15px; flex-grow: 1; display: flex; flex-direction: column; justify-content: space-between; }
        .card-title { font-size: 0.95rem; margin: 0 0 10px 0; height: 40px; overflow: hidden; font-weight: bold; text-align: center; color: #fff; }
        
        .btn-yt { background: var(--claro-red); color: white; border: none; padding: 12px; border-radius: 8px; cursor: pointer; width: 100%; font-weight: bold; transition: 0.2s; }
        .btn-yt:hover { background: #c11217; }
        .btn-temp { background: transparent; color: white; border: 1px solid #555; padding: 10px; border-radius: 8px; cursor: pointer; width: 100%; margin-top: 5px; font-weight: bold; }

        @media (max-width: 1200px) { .grid-layout { grid-template-columns: repeat(3, 1fr); } }
        @media (max-width: 768px) { .grid-layout { grid-template-columns: repeat(2, 1fr); } }
    </style>
</head>
<body>

    <div class="search-container">
        <input type="text" id="input-busca" class="search-input" placeholder="Pesquisar filme ou s√©rie (Ex: Batman, Shogun...)">
        <button class="btn-search" onclick="realizarBusca()">BUSCAR</button>
    </div>

    <nav class="header-nav">
        <button class="btn-coming-soon" onclick="buscarVemAi()">üìÖ VEM A√ç...</button>

        <div class="dropdown">
            <button class="dropbtn" id="label-tempo">EXPLORAR TEMPO</button>
            <div class="dropdown-content">
                <a onclick="setPeriodo('2026-01-01', '‚úì 2026 (Atual)')">‚úì 2026 (Atual)</a>
                <a onclick="setPeriodo('2025-01-01', 'De 2025 at√© hoje')">De 2025 at√© hoje</a>
                <a onclick="setPeriodo('2024-01-01', 'De 2024 at√© hoje')">De 2024 at√© hoje</a>
                <a onclick="setPeriodo('', 'Todo o hist√≥rico')">Todo o hist√≥rico</a>
            </div>
        </div>

        <div class="streaming-filters" id="filter-container">
            <button class="btn-filter-logo" onclick="setStreaming(8, this)" title="Netflix">
                <img src="https://cdn.ome.lt/3ElaNADWztHsI40J6dHqpTP_Vt8=/987x0/smart/filters:format(webp)/uploads/conteudo/fotos/BrandAssets_Logos_01-Wordmark.png">
            </button>
            <button class="btn-filter-logo" onclick="setStreaming(337, this)" title="Disney+">
                <img src="https://disney.images.edge.bamgrid.com/ripcut-delivery/v2/variant/disney/C67C35CF0EB8C168A861956E743C6CCD26BFB17B93227234F3CD1A81BB728F35/compose?format=webp&width=270">
            </button>
            <button class="btn-filter-logo" onclick="setStreaming(384, this)" title="HBO Max">
                <img src="https://naoseinada.com.br/wp-content/uploads/2025/07/hbo-max-logo.jpg?w=1024">
            </button>
            <button class="btn-filter-logo" onclick="setStreaming(119, this)" title="Prime Video">
                <img src="https://upload.wikimedia.org/wikipedia/commons/1/11/Amazon_Prime_Video_logo.svg">
            </button>
            <button class="btn-filter-logo" onclick="setStreaming(350, this)" title="Apple TV+">
                <img src="https://s2-techtudo.glbimg.com/QxSaJy6M0fZ3mtDymh95iCmPfng=/1200x0/filters:format(jpeg)/https://i.s3.glbimg.com/v1/AUTH_08fbf48bc0524877943fe86e43087e7a/internal_photos/bs/2025/J/8/Q4naXUQWA7x46uxCf8UA/apple-tv-e7aqjl2rqzau-og.png">
            </button>
            <button class="btn-filter-logo" onclick="setStreaming(307, this)" title="Globoplay">
                <img src="https://s2-oglobo.glbimg.com/XTmWGb2-aapiORbUGl59c26FQac=/0x0:1500x844/888x0/smart/filters:strip_icc()/i.s3.glbimg.com/v1/AUTH_da025474c0c44edd99332dddb09cabe8/internal_photos/bs/2024/k/Q/yVfaA6QpG7ufDRnWf7IA/whatsapp-image-2024-06-07-at-18.07.24.jpeg">
            </button>
        </div>
    </nav>

    <main>
        <h2 id="t1" style="border-left: 5px solid var(--claro-red); padding-left: 15px;">üé¨ Filmes Populares</h2>
        <div id="grid-filmes" class="grid-layout"></div>
        
        <h2 id="t2" style="border-left: 5px solid var(--claro-red); padding-left: 15px;">üçø S√©ries Populares</h2>
        <div id="grid-series" class="grid-layout"></div>
    </main>

    <div id="modal-temporadas" style="display:none; position:fixed; z-index:1000; left:0; top:0; width:100%; height:100%; background:rgba(0,0,0,0.95); overflow-y:auto; padding:20px;">
        <div style="background:#111; margin:auto; padding:30px; width:90%; max-width:800px; border-radius:20px; border:1px solid var(--claro-red);">
            <span style="float:right; cursor:pointer; font-size:2rem; color:var(--claro-red);" onclick="fecharModal()">&times;</span>
            <div id="lista-detalhada"></div>
        </div>
    </div>

    <script>
        const API_KEY = "a3e15f985435c14269f8f3e9bfacb207";
        const BASE_URL = "https://api.themoviedb.org/3";
        
        let streamingAtual = "";
        let periodoAtual = "";

        async function init() { aplicarFiltros(); }

        function setPeriodo(data, label) {
            periodoAtual = data ? `&primary_release_date.gte=${data}&first_air_date.gte=${data}` : '';
            document.getElementById('label-tempo').innerText = label;
            aplicarFiltros();
        }

        function setStreaming(id, btn) {
            const isSelected = btn.classList.contains('active');
            document.querySelectorAll('.btn-filter-logo').forEach(b => b.classList.remove('active'));
            
            if (isSelected) {
                streamingAtual = "";
            } else {
                streamingAtual = `&with_watch_providers=${id}&watch_region=BR`;
                btn.classList.add('active');
            }
            aplicarFiltros();
        }

        async function aplicarFiltros() {
            const config = "&with_watch_monetization_types=flatrate&watch_region=BR" + periodoAtual + streamingAtual;
            document.getElementById('t1').innerText = "üé¨ Filmes Encontrados";
            document.getElementById('t2').innerText = "üçø S√©ries Encontradas";
            await Promise.all([carregarDados('movie', 'grid-filmes', config), carregarDados('tv', 'grid-series', config)]);
        }

        async function realizarBusca() {
            const query = document.getElementById('input-busca').value;
            if(!query) return init();
            
            document.getElementById('t1').innerText = "üîç Filmes: Resultados da Busca";
            document.getElementById('t2').innerText = "üîç S√©ries: Resultados da Busca";
            
            const resM = await fetch(`${BASE_URL}/search/movie?api_key=${API_KEY}&language=pt-BR&query=${encodeURIComponent(query)}&region=BR`);
            const resT = await fetch(`${BASE_URL}/search/tv?api_key=${API_KEY}&language=pt-BR&query=${encodeURIComponent(query)}&region=BR`);
            const dM = await resM.json(); const dT = await resT.json();
            
            renderCards(dM.results.slice(0, 5), 'grid-filmes', 'movie');
            renderCards(dT.results.slice(0, 5), 'grid-series', 'tv');
        }

        async function buscarVemAi() {
            const hoje = new Date().toISOString().split('T')[0];
            const filtro = `&primary_release_date.gte=${hoje}&first_air_date.gte=${hoje}&sort_by=primary_release_date.asc`;
            document.getElementById('t1').innerText = "üìÖ Filmes: Vem A√≠...";
            document.getElementById('t2').innerText = "üìÖ S√©ries: Vem A√≠...";
            await Promise.all([carregarDados('movie', 'grid-filmes', filtro, true), carregarDados('tv', 'grid-series', filtro, true)]);
        }

        async function carregarDados(tipo, containerId, extra, isVemAi = false) {
            const url = `${BASE_URL}/discover/${tipo}?api_key=${API_KEY}&language=pt-BR&page=1${extra}`;
            const res = await fetch(url);
            const data = await res.json();
            renderCards(data.results.slice(0, 5), containerId, tipo, isVemAi);
        }

        async function renderCards(lista, containerId, tipo, isVemAi) {
            const container = document.getElementById(containerId);
            container.innerHTML = lista.length ? "" : "<p style='padding:20px'>Nenhum conte√∫do encontrado para esta sele√ß√£o.</p>";
            
            for (const item of lista) {
                const providers = await getProviders(tipo, item.id);
                const dataRaw = item.release_date || item.first_air_date || "";
                const dataBR = dataRaw ? dataRaw.split('-').reverse().join('/') : "--/--/--";
                
                container.innerHTML += `
                    <div class="card">
                        <div class="streaming-frame">${providers}</div>
                        ${isVemAi ? `<div class="release-badge">ESTREIA: ${dataBR}</div>` : ''}
                        <img src="https://image.tmdb.org/t/p/w500${item.poster_path}" class="card-poster" onerror="this.src='https://via.placeholder.com/500x750?text=CineClaro+Vendas'">
                        <div class="card-content">
                            <h3 class="card-title">${item.title || item.name}</h3>
                            <button class="btn-yt" onclick="window.open('https://www.youtube.com/results?search_query=${item.title || item.name}+trailer+oficial+dublado')">Trailer YouTube</button>
                            ${tipo === 'tv' ? `<button class="btn-temp" onclick="abrirTemporadas(${item.id})">Ver Temporadas</button>` : ''}
                        </div>
                    </div>`;
            }
        }

        async function getProviders(tipo, id) {
            const res = await fetch(`${BASE_URL}/${tipo}/${id}/watch/providers?api_key=${API_KEY}`);
            const data = await res.json();
            const br = data.results?.BR?.flatrate || [];
            return br.slice(0, 3).map(p => `<img src="https://image.tmdb.org/t/p/w500${p.logo_path}" class="mini-logo" title="${p.provider_name}">`).join('');
        }

        async function abrirTemporadas(id) {
            const res = await fetch(`${BASE_URL}/tv/${id}?api_key=${API_KEY}&language=pt-BR`);
            const s = await res.json();
            let h = `<h2>${s.name}</h2>`;
            s.seasons.forEach(t => {
                if(t.season_number > 0) h += `<button class="btn-temp" onclick="toggleEp(${id},${t.season_number})">‚ñº ${t.name}</button><div id="eps-${t.season_number}" style="display:none; padding:15px; background:#111; margin-bottom:10px; border-radius:10px"></div>`;
            });
            document.getElementById('lista-detalhada').innerHTML = h;
            document.getElementById('modal-temporadas').style.display = "block";
        }

        async function toggleEp(id, n) {
            const c = document.getElementById(`eps-${n}`);
            if(c.style.display === "block") { c.style.display = "none"; return; }
            const res = await fetch(`${BASE_URL}/tv/${id}/season/${n}?api_key=${API_KEY}&language=pt-BR`);
            const d = await res.json();
            c.innerHTML = d.episodes.map(e => `<div style="margin-bottom:10px; border-bottom:1px solid #222; padding-bottom:5px"><strong>${e.episode_number}. ${e.name}</strong><p style="font-size:0.8rem; color:#aaa">${e.overview || "Sinopse n√£o dispon√≠vel."}</p></div>`).join('');
            c.style.display = "block";
        }

        function fecharModal() { document.getElementById('modal-temporadas').style.display = "none"; }
        init();
    </script>
</body>
</html>
