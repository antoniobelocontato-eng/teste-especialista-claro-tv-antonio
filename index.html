<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Claro TV+ | Especialista</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background: #0f172a; color: #f8fafc; overflow-x: hidden; }
        .gradient-header { background: linear-gradient(180deg, #ee1d23 0%, rgba(15,23,42,0) 100%); }
        .glass-card { background: #fff; border-radius: 30px; padding: 25px; color: #1e293b; margin-bottom: 2rem; box-shadow: 0 10px 25px rgba(0,0,0,0.3); position: relative; }
        .card-app { background: #fff; border-radius: 20px; height: 60px; display:flex; align-items:center; justify-content:center; cursor:pointer; border:2px solid #e2e8f0; transition: 0.3s; padding: 10px; }
        .is-active-app { border: 4px solid #ee1d23; box-shadow: 0 0 20px rgba(238, 29, 35, 0.4); transform: scale(1.05); }
        .menu-item { border-bottom: 1px solid #f1f5f9; width: 100%; text-align: left; padding: 18px 20px; font-size: 15px; font-weight: 500; color: #1e293b; display: flex; align-items: center; }
        .hidden { display: none !important; }
        .poster-img { width: 100%; max-width: 220px; border-radius: 20px; margin: 0 auto 1.5rem; display: block; object-fit: cover; height: 330px; }
        .btn-action { width: 100%; padding: 12px; border-radius: 15px; font-weight: 900; text-transform: uppercase; font-size: 11px; margin-top: 8px; transition: 0.3s; }
        /* Modal Style */
        .modal { display: none; position: fixed; z-index: 100; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); overflow-y: auto; }
        .modal-content { background: #fff; margin: 10% auto; padding: 20px; width: 90%; max-width: 600px; border-radius: 30px; color: #1e293b; }
    </style>
</head>
<body>

<div id="page-home">
    <header class="gradient-header pt-10 pb-16 px-6 text-center">
        <h1 class="text-3xl font-black italic uppercase mb-6 text-white tracking-tighter">CLARO TV+ <br><span class="text-white/50 text-2xl">ESPECIALISTA</span></h1>
        
        <div class="flex justify-center gap-2 flex-wrap mb-6">
            <button onclick="toggleMenu('lista-historico')" class="px-4 py-2 rounded-full bg-white/20 text-[9px] font-black uppercase">ðŸ“… HistÃ³rico</button>
            <button onclick="toggleMenu('lista-generos')" class="px-4 py-2 rounded-full bg-white/20 text-[9px] font-black uppercase">ðŸŽ­ GÃªneros</button>
            <button onclick="navegarPara('page-estreias')" class="px-4 py-2 rounded-full bg-yellow-400 text-black text-[9px] font-black uppercase">LanÃ§amentos 2026</button>
            <button onclick="resetar()" class="px-4 py-2 rounded-full bg-red-600 text-white text-[9px] font-black uppercase">Reset</button>
        </div>

        <div id="lista-historico" class="hidden bg-white max-w-sm mx-auto rounded-[30px] shadow-2xl absolute left-0 right-0 z-50 mt-2">
            <button onclick="setAno('2026')" class="menu-item">âœ“ 2026 (Atual)</button>
            <button onclick="setAno('2025')" class="menu-item">De 2025 atÃ© hoje</button>
            <button onclick="setAno('2024')" class="menu-item">De 2024 atÃ© hoje</button>
            <button onclick="setAno('all')" class="menu-item">Todo o histÃ³rico</button>
        </div>

        <div id="lista-generos" class="hidden bg-white max-w-sm mx-auto rounded-[30px] shadow-2xl absolute left-0 right-0 z-50 mt-2">
            <div id="generos-container"></div>
        </div>

        <div id="streaming-grid" class="grid grid-cols-2 md:grid-cols-3 gap-3 bg-white/90 p-4 rounded-[35px] max-w-xl mx-auto mt-6 shadow-2xl"></div>
    </header>

    <main class="max-w-4xl mx-auto px-6 space-y-12 pb-20">
        <div id="app-filmes"></div>
        <div id="app-series"></div>
    </main>
</div>

<div id="modal-temporadas" class="modal">
    <div class="modal-content">
        <div class="flex justify-between items-center mb-4">
            <h2 id="modal-titulo" class="font-black uppercase italic text-xl">Temporadas</h2>
            <button onclick="fecharModal()" class="text-red-600 font-bold">FECHAR X</button>
        </div>
        <div id="lista-episodios" class="space-y-4"></div>
    </div>
</div>

<script>
const API_KEY="a3e15f985435c14269f8f3e9bfacb207";
const BASE="https://api.themoviedb.org/3";
const PROVIDERS = { Netflix: 8, "HBO MAX": 1899, "Disney+": 337, "Apple TV+": 350, Globoplay: 307, "Prime Video": 119 };
const LOGOS = { 
    Netflix: "https://upload.wikimedia.org/wikipedia/commons/0/08/Netflix_2015_logo.svg",
    "HBO MAX": "https://logosmarcas.net/wp-content/uploads/2022/01/HBO-Max-Logo.png",
    "Disney+": "https://upload.wikimedia.org/wikipedia/commons/3/3e/Disney%2B_logo.svg",
    "Apple TV+": "https://upload.wikimedia.org/wikipedia/commons/2/28/Apple_TV_Plus_Logo.svg",
    Globoplay: "https://upload.wikimedia.org/wikipedia/commons/b/b0/Globoplay_logo_2020.svg",
    "Prime Video": "https://upload.wikimedia.org/wikipedia/commons/1/11/Amazon_Prime_Video_logo.svg"
};
const GENRES = [{id:28, name:"AÃ§Ã£o"}, {id:35, name:"ComÃ©dia"}, {id:10749, name:"Romance"}, {id:18, name:"Drama"}, {id:27, name:"Terror"}, {id:10762, name:"Kids"}];

let appAtivo = null, generoAtivo = null, anoAtivo = '2026';

function init() {
    const grid = document.getElementById("streaming-grid");
    grid.innerHTML = "";
    Object.keys(PROVIDERS).forEach(p => {
        const d = document.createElement("div");
        d.className = `card-app ${appAtivo === p ? 'is-active-app' : ''}`;
        d.onclick = () => { appAtivo = (appAtivo === p) ? null : p; init(); render(); };
        d.innerHTML = `<img src="${LOGOS[p]}" class="h-6 pointer-events-none">`;
        grid.appendChild(d);
    });
    document.getElementById("generos-container").innerHTML = GENRES.map(g => `<button onclick="setGenero(${g.id})" class="menu-item">${g.name}</button>`).join("");
}

function toggleMenu(id) { document.getElementById(id).classList.toggle('hidden'); }
function setGenero(id) { generoAtivo = id; toggleMenu('lista-generos'); render(); }
function setAno(ano) { anoAtivo = ano; toggleMenu('lista-historico'); render(); }
function resetar() { location.reload(); }

async function render() {
    const pId = appAtivo ? PROVIDERS[appAtivo] : Object.values(PROVIDERS).join('|');
    let params = `api_key=${API_KEY}&language=pt-BR&watch_region=BR&with_watch_providers=${pId}&sort_by=popularity.desc`;
    if(generoAtivo) params += `&with_genres=${generoAtivo}`;
    if(anoAtivo !== 'all') params += `&primary_release_date.gte=${anoAtivo}-01-01`;

    const [mRes, tRes] = await Promise.all([
        fetch(`${BASE}/discover/movie?${params}`).then(r => r.json()),
        fetch(`${BASE}/discover/tv?${params.replace('primary_release_date','first_air_date')}`).then(r => r.json())
    ]);

    renderConteudo("app-filmes", "ðŸŽ¬ 5 FILMES POPULARES", mRes.results?.slice(0, 5), 'movie');
    renderConteudo("app-series", "ðŸ“º 5 SÃ‰RIES POPULARES", tRes.results?.slice(0, 5), 'tv');
}

async function renderConteudo(divId, titulo, dados, tipo) {
    const container = document.getElementById(divId);
    container.innerHTML = `<h2 class="text-2xl font-black uppercase italic mb-8 border-l-4 border-red-600 pl-4 text-white">${titulo}</h2>`;
    
    for (const item of dados) {
        const providers = await fetch(`${BASE}/${tipo}/${item.id}/watch/providers?api_key=${API_KEY}`).then(r => r.json());
        const ondeAssistir = providers.results?.BR?.flatrate?.map(p => p.provider_name).join(" | ") || "Verificar disponibilidade";
        
        const videos = await fetch(`${BASE}/${tipo}/${item.id}/videos?api_key=${API_KEY}&language=pt-BR`).then(r => r.json());
        const trailer = videos.results.find(v => v.type === "Trailer")?.key;

        container.innerHTML += `
            <div class="glass-card">
                <div class="bg-red-50 rounded-xl p-2 text-center text-[10px] font-black mb-4 uppercase text-red-600 border border-red-100">${ondeAssistir}</div>
                <h3 class="text-xl font-black text-center mb-4 uppercase leading-tight">${item.title || item.name}</h3>
                <img src="https://image.tmdb.org/t/p/w500${item.poster_path}" class="poster-img shadow-2xl border-4 border-white">
                <p class="text-sm text-center line-clamp-3 mb-6 px-2 text-gray-500 italic">"${item.overview || "Sem sinopse disponÃ­vel."}"</p>
                
                <div class="flex gap-2">
                    ${trailer ? `<button onclick="window.open('https://youtube.com/watch?v=${trailer}')" class="btn-action bg-red-600 text-white">Ver Trailer</button>` : ''}
                    ${tipo === 'tv' ? `<button onclick="abrirTemporadas(${item.id}, '${item.name}')" class="btn-action bg-blue-600 text-white">Temporadas</button>` : ''}
                </div>
                <div class="mt-4 text-center font-black text-gray-400 text-[10px] uppercase tracking-widest">Popularidade: ${Math.round(item.vote_average * 10)}% de aprovaÃ§Ã£o</div>
            </div>`;
    }
}

async function abrirTemporadas(id, nome) {
    const res = await fetch(`${BASE}/tv/${id}?api_key=${API_KEY}&language=pt-BR`).then(r => r.json());
    document.getElementById("modal-titulo").innerText = nome;
    document.getElementById("lista-episodios").innerHTML = res.seasons.map(s => `
        <details class="bg-gray-100 p-4 rounded-2xl">
            <summary class="font-black uppercase text-sm cursor-pointer">${s.name} (${s.episode_count} Eps)</summary>
            <p class="text-xs mt-2 text-gray-600">${s.overview || "Sinopse da temporada nÃ£o disponÃ­vel."}</p>
        </details>
    `).join("");
    document.getElementById("modal-temporadas").style.display = "block";
}

function fecharModal() { document.getElementById("modal-temporadas").style.display = "none"; }

init(); render();
</script>
</body>
</html>
