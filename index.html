<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Claro TV+ | Especialista</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background: #0f172a; color: #f8fafc; overflow-x: hidden; }
        .gradient-header { background: linear-gradient(180deg, #ee1d23 0%, rgba(15,23,42,0) 100%); }
        .glass-card { background: #fff; border-radius: 30px; padding: 25px; color: #1e293b; margin-bottom: 2rem; box-shadow: 0 10px 25px rgba(0,0,0,0.3); }
        .card-app { background: #fff; border-radius: 20px; height: 75px; display:flex; align-items:center; justify-content:center; cursor:pointer; border:2px solid #e2e8f0; transition: 0.3s; padding: 12px; }
        .is-active-app { border: 4px solid #ee1d23; box-shadow: 0 0 20px rgba(238, 29, 35, 0.4); transform: scale(1.05); }
        .menu-item { border-bottom: 1px solid #f1f5f9; width: 100%; text-align: left; padding: 18px 20px; font-size: 15px; font-weight: 500; color: #1e293b; display: flex; align-items: center; }
        .hidden { display: none !important; }
        .btn-novidade { background: #1e293b; border: 1px solid rgba(255,255,255,0.1); color: white; padding: 18px 30px; border-radius: 999px; font-size: 13px; font-weight: 900; text-transform: uppercase; width: 100%; transition: 0.3s; }
    </style>
</head>
<body>

<div id="page-home">
    <header class="gradient-header pt-10 pb-16 px-6 text-center">
        <h1 class="text-3xl font-black italic uppercase mb-6 text-white tracking-tighter">CLARO TV+ <br><span class="text-white/50 text-2xl">ESPECIALISTA</span></h1>
        
        <div class="flex justify-center gap-2 flex-wrap mb-6">
            <button onclick="toggleMenu('lista-historico')" class="px-4 py-2 rounded-full bg-white/20 text-[9px] font-black uppercase">Hist√≥rico</button>
            <button onclick="toggleMenu('lista-generos')" class="px-4 py-2 rounded-full bg-white/20 text-[9px] font-black uppercase">G√™neros</button>
            <button onclick="navegarPara('page-estreias')" class="px-4 py-2 rounded-full bg-yellow-400 text-black text-[9px] font-black uppercase">Lan√ßamentos Brasil</button>
            <button onclick="carregarRecentes()" class="px-4 py-2 rounded-full bg-blue-600 text-white text-[9px] font-black uppercase">Adicionado Recente</button>
            <button onclick="resetar()" class="px-4 py-2 rounded-full bg-red-600 text-white text-[9px] font-black uppercase">Reset</button>
        </div>

        <div id="lista-historico" class="hidden bg-white max-w-sm mx-auto rounded-[30px] shadow-2xl absolute left-0 right-0 z-50 mt-2">
            <button onclick="setAno('2025')" class="menu-item">‚úì De 2025 at√© hoje</button>
            <button onclick="setAno('2024')" class="menu-item">De 2024 at√© hoje</button>
            <button onclick="setAno('all')" class="menu-item">Todo o hist√≥rico</button>
        </div>

        <div id="lista-generos" class="hidden bg-white max-w-sm mx-auto rounded-[30px] shadow-2xl absolute left-0 right-0 z-50 mt-2">
            <div id="generos-container"></div>
        </div>

        <div id="streaming-grid" class="grid grid-cols-2 md:grid-cols-3 gap-4 bg-white/90 p-5 rounded-[35px] max-w-2xl mx-auto mt-6 shadow-2xl border border-white/20"></div>
    </header>

    <main class="max-w-4xl mx-auto px-6 space-y-16 mt-10">
        <div id="app-filmes"></div>
        <div id="app-series"></div>
    </main>
</div>

<div id="page-estreias" class="hidden min-h-screen bg-[#0f172a] p-6 pt-12">
    <div class="max-w-xl mx-auto text-center space-y-8">
        <h2 class="text-4xl font-black italic uppercase text-yellow-400">üöÄ LAN√áAMENTOS NO BRASIL</h2>
        <div class="space-y-4">
            <button onclick="carregarNovidades('movie_streaming')" class="btn-novidade">Filmes Streaming (Em Breve)</button>
            <button onclick="carregarNovidades('tv_streaming')" class="btn-novidade">S√©ries Streaming (Em Breve)</button>
            <button onclick="carregarNovidades('cinema')" class="btn-novidade">Estreias Cinema</button>
        </div>
        <button onclick="navegarPara('page-home')" class="text-white/30 uppercase text-[11px] font-black pt-8 block mx-auto">‚Üê VOLTAR PARA A HOME</button>
        <div id="container-novidades" class="mt-12 text-left space-y-6"></div>
    </div>
</div>

<script>
const API_KEY="a3e15f985435c14269f8f3e9bfacb207";
const BASE="https://api.themoviedb.org/3";
const PROVIDERS = { Netflix: 8, "HBO MAX": 1899, "Disney+": 337, "Apple TV+": 350, Globoplay: 307, "Prime Video": 119 };
const LOGOS = { 
    Netflix: "https://upload.wikimedia.org/wikipedia/commons/0/08/Netflix_2015_logo.svg",
    "HBO MAX": "https://logosmarcas.net/wp-content/uploads/2022/01/HBO-Max-Logo.png",
    "Disney+": "https://upload.wikimedia.org/wikipedia/commons/3/3e/Disney%2B_logo.svg",
    "Apple TV+": "https://upload.wikimedia.org/wikipedia/commons/2/28/Apple_TV_Plus_Logo.svg",
    Globoplay: "https://upload.wikimedia.org/wikipedia/commons/b/b0/Globoplay_logo_2020.svg",
    "Prime Video": "https://upload.wikimedia.org/wikipedia/commons/1/11/Amazon_Prime_Video_logo.svg"
};
const GENRES = [{id:28, name:"A√ß√£o"}, {id:35, name:"Com√©dia"}, {id:10749, name:"Romance"}, {id:18, name:"Drama"}, {id:27, name:"Terror"}, {id:10762, name:"Kids"}];

let appAtivo = null, generoAtivo = null, anoAtivo = '2025';

function init() {
    const grid = document.getElementById("streaming-grid");
    grid.innerHTML = "";
    Object.keys(PROVIDERS).forEach(p => {
        const d = document.createElement("div");
        d.className = `card-app ${appAtivo === p ? 'is-active-app' : ''}`;
        d.onclick = (e) => { e.stopPropagation(); appAtivo = (appAtivo === p) ? null : p; init(); render(); };
        d.innerHTML = `<img src="${LOGOS[p]}" class="h-8 pointer-events-none">`;
        grid.appendChild(d);
    });

    const gCont = document.getElementById("generos-container");
    gCont.innerHTML = GENRES.map(g => `<button onclick="setGenero(${g.id})" class="menu-item">${g.name}</button>`).join("");
}

function toggleMenu(id) { document.getElementById(id).classList.toggle('hidden'); }
function navegarPara(id) { document.getElementById('page-home').classList.add('hidden'); document.getElementById('page-estreias').classList.add('hidden'); document.getElementById(id).classList.remove('hidden'); }
function setGenero(id) { generoAtivo = id; toggleMenu('lista-generos'); render(); }
function setAno(ano) { anoAtivo = ano; toggleMenu('lista-historico'); render(); }
function resetar() { location.reload(); }

async function render() {
    const pId = appAtivo ? PROVIDERS[appAtivo] : Object.values(PROVIDERS).join('|');
    const params = `api_key=${API_KEY}&language=pt-BR&watch_region=BR&with_watch_providers=${pId}&sort_by=popularity.desc${generoAtivo ? `&with_genres=${generoAtivo}` : ''}${anoAtivo === 'all' ? '' : `&primary_release_date.gte=${anoAtivo}-01-01`}`;
    
    try {
        const [mRes, tRes] = await Promise.all([
            fetch(`${BASE}/discover/movie?${params}`).then(r => r.json()),
            fetch(`${BASE}/discover/tv?${params.replace('primary_release_date','first_air_date')}`).then(r => r.json())
        ]);
        renderConteudo("app-filmes", "üé¨ FILMES POPULARES", mRes.results?.slice(0, 5));
        renderConteudo("app-series", "üì∫ S√âRIES POPULARES", tRes.results?.slice(0, 5));
    } catch (e) { console.error("Erro ao carregar dados"); }
}

function renderConteudo(divId, titulo, dados) {
    const container = document.getElementById(divId);
    container.innerHTML = `<h2 class="text-2xl font-black uppercase italic mb-8 border-l-4 border-red-600 pl-4">${titulo}</h2>`;
    if(!dados) return;
    dados.forEach(item => {
        container.innerHTML += `
            <div class="glass-card">
                <div class="bg-gray-100 rounded-xl p-2 text-center text-[10px] font-bold mb-4 uppercase text-gray-600">Assista em Claro TV+ e Parcerias</div>
                <h3 class="text-xl font-black text-center mb-4 uppercase">${item.title || item.name}</h3>
                <img src="https://image.tmdb.org/t/p/w500${item.poster_path}" class="mx-auto rounded-[25px] mb-6 max-w-[250px] shadow-lg">
                <p class="text-sm text-center line-clamp-3">${item.overview || ""}</p>
            </div>`;
    });
}

init(); render();
</script>
</body>
</html>
