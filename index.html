<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CineClaro Premium - 2026</title>
    <style>
        :root { --claro-red: #ee1d23; --deep-black: #0a0a0a; --surface: #1a1a1a; --accent-gold: #ffd700; }
        body { background: radial-gradient(circle at top, #3a0000 0%, #0a0a0a 100%) fixed; color: white; font-family: 'Inter', sans-serif; margin: 0; padding: 15px; -webkit-tap-highlight-color: transparent; }
        
        /* Busca e Reset */
        .search-container { max-width: 800px; margin: 0 auto 20px; display: flex; flex-direction: column; gap: 8px; }
        .search-row { display: flex; gap: 8px; width: 100%; }
        .search-input { flex-grow: 1; padding: 12px 18px; border-radius: 50px; border: 1px solid #444; background: rgba(0,0,0,0.5); color: white; outline: none; font-size: 16px; }
        .btn-search { background: var(--claro-red); border: none; border-radius: 50px; padding: 0 20px; color: white; font-weight: bold; cursor: pointer; }
        .btn-reset { background: #444; color: white; border: none; padding: 10px 20px; border-radius: 50px; font-size: 12px; cursor: pointer; display: none; align-self: center; font-weight: bold; margin-top: 10px; }

        /* Navega√ß√£o */
        .header-nav { display: flex; flex-direction: column; gap: 12px; margin-bottom: 30px; align-items: center; }
        .btn-coming-soon { background: var(--accent-gold); color: black; padding: 12px 20px; border: none; border-radius: 50px; cursor: pointer; font-weight: bold; width: 100%; max-width: 300px; text-transform: uppercase; margin-bottom: 5px; }

        /* Dropdowns Corrigidos */
        .dropdown-row { display: flex; gap: 10px; width: 100%; max-width: 500px; justify-content: center; position: relative; }
        .dropdown { position: relative; flex: 1; }
        .dropbtn { background: #222; color: white; padding: 12px; border: 1px solid var(--claro-red); border-radius: 8px; cursor: pointer; font-weight: bold; width: 100%; text-align: center; font-size: 13px; }
        
        .dropdown-content { 
            display: none; position: absolute; background: #222; 
            width: 170%; left: 50%; transform: translateX(-50%);
            z-index: 1000; border-radius: 8px; border: 1px solid #444; 
            margin-top: 5px; box-shadow: 0 10px 30px rgba(0,0,0,0.8); 
            max-height: 350px; overflow-y: auto;
        }
        .dropdown-content a { color: white; padding: 15px; text-decoration: none; display: block; border-bottom: 1px solid #333; font-size: 14px; text-align: center; }
        .dropdown-content.show { display: block; }

        /* Streaming Filtros */
        .streaming-filters { display: flex; gap: 8px; flex-wrap: wrap; justify-content: center; margin-top: 10px; }
        .btn-filter-logo { background: #000; border: 1px solid #444; border-radius: 12px; cursor: pointer; width: 60px; height: 50px; padding: 6px; display: flex; align-items: center; justify-content: center; }
        .btn-filter-logo.active { border-color: var(--claro-red); box-shadow: 0 0 10px var(--claro-red); }
        .btn-filter-logo img { width: 100%; height: 100%; object-fit: contain; pointer-events: none; }

        /* Grid */
        .grid-layout { display: grid; grid-template-columns: repeat(5, 1fr); gap: 15px; margin-bottom: 40px; }
        .card { background: var(--surface); border-radius: 15px; overflow: hidden; display: flex; flex-direction: column; border: 1px solid #333; position: relative; }
        .streaming-frame { background: #000; padding: 6px; display: flex; justify-content: center; gap: 6px; border-bottom: 2px solid var(--claro-red); min-height: 30px; align-items: center; }
        .mini-logo { width: 22px; height: 22px; border-radius: 3px; object-fit: contain; }
        .card-poster { width: 100%; aspect-ratio: 2/3; object-fit: cover; background: #000; }
        .card-content { padding: 12px; flex-grow: 1; text-align: center; display: flex; flex-direction: column; gap: 5px; }
        .card-title { font-size: 0.9rem; margin-bottom: 5px; height: 38px; overflow: hidden; font-weight: bold; color: #fff; line-height: 1.2; }
        
        .btn-yt { background: var(--claro-red); color: white; border: none; padding: 10px; border-radius: 8px; cursor: pointer; width: 100%; font-weight: bold; font-size: 13px; }
        .btn-synop { background: #333; color: white; border: 1px solid #555; padding: 8px; border-radius: 8px; cursor: pointer; width: 100%; font-weight: bold; font-size: 12px; }
        .btn-temp { background: transparent; color: white; border: 1px solid #555; padding: 8px; border-radius: 8px; cursor: pointer; width: 100%; font-weight: bold; font-size: 12px; }

        .movie-synopsis-box { display: none; font-size: 0.75rem; color: #ccc; margin-top: 5px; text-align: left; background: #000; padding: 8px; border-radius: 5px; }

        /* Modais */
        .modal-overlay { display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); padding: 10px; box-sizing: border-box; align-items:center; justify-content:center; }
        .modal-body { background: #111; padding: 20px; width: 100%; max-width: 500px; max-height: 85vh; border-radius: 20px; border: 1px solid var(--claro-red); overflow-y: auto; position: relative; }
        .close-x { position: sticky; top: 0; float:right; cursor:pointer; font-size:1.8rem; color:var(--claro-red); background: #111; border-radius: 50%; padding: 5px; }

        .ep-button { background: none; border: none; color: white; text-align: left; width: 100%; padding: 12px 0; border-bottom: 1px solid #222; cursor: pointer; font-size: 14px; }

        @media (max-width: 1024px) { .grid-layout { grid-template-columns: repeat(3, 1fr); } }
        @media (max-width: 600px) { .grid-layout { grid-template-columns: repeat(2, 1fr); gap: 10px; } }
    </style>
</head>
<body>

    <div class="search-container">
        <div class="search-row">
            <input type="text" id="input-busca" class="search-input" placeholder="Buscar no cat√°logo...">
            <button class="btn-search" onclick="realizarBusca()">üîç</button>
        </div>
        <button id="btn-voltar" class="btn-reset" onclick="init()">‚Üê VOLTAR AO IN√çCIO</button>
    </div>

    <nav class="header-nav">
        <button class="btn-coming-soon" onclick="buscarVemAi()">üìÖ VEM A√ç...</button>
        
        <div class="dropdown-row">
            <div class="dropdown">
                <button class="dropbtn" id="label-tempo" onclick="toggleDropdown('drop-tempo')">TEMPO ‚ñæ</button>
                <div id="drop-tempo" class="dropdown-content">
                    <a onclick="setPeriodo('2026-01-01', '‚úì 2026 (Atual)')">‚úì 2026 (Atual)</a>
                    <a onclick="setPeriodo('2025-01-01', 'De 2025 at√© hoje')">De 2025 at√© hoje</a>
                    <a onclick="setPeriodo('2024-01-01', 'De 2024 at√© hoje')">De 2024 at√© hoje</a>
                    <a onclick="setPeriodo('', 'Todo o hist√≥rico')">Todo o hist√≥rico</a>
                </div>
            </div>

            <div class="dropdown">
                <button class="dropbtn" id="label-genero" onclick="toggleDropdown('drop-genero')">G√äNERO ‚ñæ</button>
                <div id="drop-genero" class="dropdown-content">
                    <a onclick="setGenero('', '', 'Todos')">Todos os G√™neros</a>
                    <a onclick="setGenero('28', '10759', 'A√ß√£o')">A√ß√£o</a>
                    <a onclick="setGenero('16', '16', 'Anima√ß√£o/Kids')">Anima√ß√£o & Kids</a>
                    <a onclick="setGenero('12', '10759', 'Aventura')">Aventura</a>
                    <a onclick="setGenero('35', '35', 'Com√©dia')">Com√©dia</a>
                    <a onclick="setGenero('99', '99', 'Document√°rio')">Document√°rio</a>
                    <a onclick="setGenero('18', '18', 'Drama')">Drama</a>
                    <a onclick="setGenero('10749', '10749', 'Romance')">Romance</a>
                    <a onclick="setGenero('53', '9648', 'Suspense')">Suspense</a>
                    <a onclick="setGenero('27', '9648', 'Terror')">Terror</a>
                </div>
            </div>
        </div>

        <div class="streaming-filters">
            <button class="btn-filter-logo" onclick="setStreaming(8, this)" title="Netflix"><img src="https://cdn.ome.lt/3ElaNADWztHsI40J6dHqpTP_Vt8=/987x0/smart/filters:format(webp)/uploads/conteudo/fotos/BrandAssets_Logos_01-Wordmark.png"></button>
            <button class="btn-filter-logo" onclick="setStreaming(337, this)" title="Disney+"><img src="https://disney.images.edge.bamgrid.com/ripcut-delivery/v2/variant/disney/C67C35CF0EB8C168A861956E743C6CCD26BFB17B93227234F3CD1A81BB728F35/compose?format=webp&width=270"></button>
            <button class="btn-filter-logo" onclick="setStreaming(1899, this)" title="Max (HBO)"><img src="https://naoseinada.com.br/wp-content/uploads/2025/07/hbo-max-logo.jpg?w=1024"></button>
            <button class="btn-filter-logo" onclick="setStreaming(119, this)" title="Prime Video"><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQi6kYFccGsF7hBBshDGNl4vlCO1lU8-7FeHg&s"></button>
            <button class="btn-filter-logo" onclick="setStreaming(350, this)" title="Apple TV+"><img src="https://s2-techtudo.glbimg.com/QxSaJy6M0fZ3mtDymh95iCmPfng=/1200x0/filters:format(jpeg)/https://i.s3.glbimg.com/v1/AUTH_08fbf48bc0524877943fe86e43087e7a/internal_photos/bs/2025/J/8/Q4naXUQWA7x46uxCf8UA/apple-tv-e7aqjl2rqzau-og.png"></button>
            <button class="btn-filter-logo" onclick="setStreaming(307, this)" title="Globoplay"><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTcS9rQBeH8NwfSwv9ZZmTtdC-obH3oUW3ydA&s"></button>
        </div>
    </nav>

    <main>
        <h2 id="t1" style="border-left: 4px solid var(--claro-red); padding-left: 10px;">üé¨ Filmes Populares</h2>
        <div id="grid-filmes" class="grid-layout"></div>
        <h2 id="t2" style="border-left: 4px solid var(--claro-red); padding-left: 10px;">üçø S√©ries Populares</h2>
        <div id="grid-series" class="grid-layout"></div>
    </main>

    <div id="modal-geral" class="modal-overlay" onclick="event.target == this ? fecharModal('modal-geral') : null">
        <div class="modal-body">
            <span class="close-x" onclick="fecharModal('modal-geral')">&times;</span>
            <div id="conteudo-modal"></div>
        </div>
    </div>

    <div id="modal-episodio" class="modal-overlay" style="z-index:3000" onclick="fecharModal('modal-episodio')">
        <div class="modal-body" style="border-color: var(--accent-gold); max-width: 400px;">
            <span class="close-x" style="color: var(--accent-gold)" onclick="fecharModal('modal-episodio')">&times;</span>
            <div id="conteudo-episodio"></div>
        </div>
    </div>

    <script>
        const API_KEY = "a3e15f985435c14269f8f3e9bfacb207";
        const BASE_URL = "https://api.themoviedb.org/3";
        let streamingAtual = "", periodoAtual = "", genFilme = "", genSerie = "";

        function toggleDropdown(id) { 
            const el = document.getElementById(id);
            const isVisible = el.classList.contains('show');
            document.querySelectorAll('.dropdown-content').forEach(d => d.classList.remove('show'));
            if (!isVisible) el.classList.add('show');
        }

        async function init() {
            periodoAtual = ""; streamingAtual = ""; genFilme = ""; genSerie = "";
            document.getElementById('btn-voltar').style.display = 'none';
            document.getElementById('input-busca').value = '';
            document.getElementById('label-tempo').innerText = 'TEMPO ‚ñæ';
            document.getElementById('label-genero').innerText = 'G√äNERO ‚ñæ';
            document.querySelectorAll('.btn-filter-logo').forEach(b => b.classList.remove('active'));
            aplicarFiltros();
        }

        async function setPeriodo(data, label) {
            periodoAtual = data ? `&primary_release_date.gte=${data}&first_air_date.gte=${data}` : '';
            document.getElementById('label-tempo').innerText = label;
            document.getElementById('btn-voltar').style.display = 'block';
            document.getElementById('drop-tempo').classList.remove('show');
            aplicarFiltros();
        }

        async function setGenero(idM, idS, label) {
            genFilme = idM ? `&with_genres=${idM}` : '';
            genSerie = idS ? `&with_genres=${idS}` : '';
            document.getElementById('label-genero').innerText = label;
            document.getElementById('btn-voltar').style.display = 'block';
            document.getElementById('drop-genero').classList.remove('show');
            aplicarFiltros();
        }

        function setStreaming(id, btn) {
            const isSelected = btn.classList.contains('active');
            document.querySelectorAll('.btn-filter-logo').forEach(b => b.classList.remove('active'));
            streamingAtual = isSelected ? "" : `&with_watch_providers=${id}&watch_region=BR`;
            if (!isSelected) { btn.classList.add('active'); document.getElementById('btn-voltar').style.display = 'block'; }
            aplicarFiltros();
        }

        async function aplicarFiltros() {
            const config = "&with_watch_monetization_types=flatrate&watch_region=BR" + periodoAtual + streamingAtual;
            carregarDados('movie', 'grid-filmes', config + genFilme); 
            carregarDados('tv', 'grid-series', config + genSerie);
        }

        async function carregarDados(tipo, containerId, extra) {
            const res = await fetch(`${BASE_URL}/discover/${tipo}?api_key=${API_KEY}&language=pt-BR&sort_by=popularity.desc&page=1${extra}`);
            const data = await res.json();
            renderCards(data.results.slice(0, 5), containerId, tipo);
        }

        async function renderCards(lista, containerId, tipo) {
            const container = document.getElementById(containerId);
            container.innerHTML = lista.length ? "" : "<p style='padding:15px'>Nenhum conte√∫do encontrado.</p>";
            for (const item of lista) {
                const provRes = await fetch(`${BASE_URL}/${tipo}/${item.id}/watch/providers?api_key=${API_KEY}`).then(r => r.json());
                const br = (provRes.results?.BR?.flatrate || []).slice(0, 3).map(p => `<img src="https://image.tmdb.org/t/p/w500${p.logo_path}" class="mini-logo">`).join('');
                
                container.innerHTML += `
                    <div class="card">
                        <div class="streaming-frame">${br || '<span style="font-size:10px">Ver no App</span>'}</div>
                        <img src="https://image.tmdb.org/t/p/w500${item.poster_path}" class="card-poster" onerror="this.src='https://via.placeholder.com/200x300?text=CineClaro'">
                        <div class="card-content">
                            <h3 class="card-title">${item.title || item.name}</h3>
                            <button class="btn-yt" onclick="window.open('https://www.youtube.com/results?search_query=${item.title || item.name}+trailer+oficial')">Ver Trailer</button>
                            ${tipo === 'movie' ? 
                                `<button class="btn-synop" onclick="toggleMovieSynop(${item.id})">Sinopse</button>
                                 <div id="synop-movie-${item.id}" class="movie-synopsis-box">${item.overview || "Sinopse n√£o dispon√≠vel."}</div>` 
                                : 
                                `<button class="btn-synop" onclick="abrirSinopseSerie('${(item.name || "").replace(/'/g, "")}', '${(item.overview || "Sem sinopse").replace(/'/g, "")}')">Sinopse da S√©rie</button>
                                 <button class="btn-temp" onclick="abrirTemporadas(${item.id})">Temporadas</button>`}
                        </div>
                    </div>`;
            }
        }

        function toggleMovieSynop(id) {
            const box = document.getElementById(`synop-movie-${id}`);
            box.style.display = box.style.display === "block" ? "none" : "block";
        }

        function abrirSinopseSerie(titulo, texto) {
            document.getElementById('conteudo-modal').innerHTML = `<h2>${titulo}</h2><p style="font-size:14px; line-height:1.6">${texto}</p>`;
            document.getElementById('modal-geral').style.display = "flex";
        }

        async function abrirTemporadas(id) {
            const res = await fetch(`${BASE_URL}/tv/${id}?api_key=${API_KEY}&language=pt-BR`).then(r => r.json());
            let h = `<h2>${res.name}</h2>`;
            res.seasons.forEach(t => {
                if(t.season_number > 0) {
                    h += `<button class="dropbtn" style="width:100%; text-align:left; margin-bottom:5px" onclick="toggleEp(${id},${t.season_number})">‚ñº ${t.name}</button>
                          <div id="eps-${t.season_number}" style="display:none; padding:10px; background:#1a1a1a"></div>`;
                }
            });
            document.getElementById('conteudo-modal').innerHTML = h;
            document.getElementById('modal-geral').style.display = "flex";
        }

        async function toggleEp(id, n) {
            const c = document.getElementById(`eps-${n}`);
            if(c.style.display === "block") { c.style.display = "none"; return; }
            const res = await fetch(`${BASE_URL}/tv/${id}/season/${n}?api_key=${API_KEY}&language=pt-BR`).then(r => r.json());
            c.innerHTML = res.episodes.map(e => `
                <button class="ep-button" onclick="abrirSinopseEpisodio('${(e.name || "").replace(/'/g, "")}', '${(e.overview || "Sem sinopse").replace(/'/g, "")}')">
                    ${e.episode_number}. ${e.name}
                </button>`).join('');
            c.style.display = "block";
        }

        function abrirSinopseEpisodio(nome, sinopse) {
            document.getElementById('conteudo-episodio').innerHTML = `<h3>${nome}</h3><p style="font-size:14px; line-height:1.5">${sinopse}</p>`;
            document.getElementById('modal-episodio').style.display = "flex";
        }

        function fecharModal(id) { document.getElementById(id).style.display = "none"; }

        async function realizarBusca() {
            const q = document.getElementById('input-busca').value;
            if(!q) return init();
            document.getElementById('btn-voltar').style.display = 'block';
            document.getElementById('t1').innerText = "üîç Filmes Encontrados";
            document.getElementById('t2').innerText = "üîç S√©ries Encontradas";
            
            const resM = await fetch(`${BASE_URL}/search/movie?api_key=${API_KEY}&language=pt-BR&query=${encodeURIComponent(q)}&region=BR`).then(r => r.json());
            const resT = await fetch(`${BASE_URL}/search/tv?api_key=${API_KEY}&language=pt-BR&query=${encodeURIComponent(q)}&region=BR`).then(r => r.json());
            
            renderCards(resM.results.slice(0, 5), 'grid-filmes', 'movie');
            renderCards(resT.results.slice(0, 5), 'grid-series', 'tv');
        }

        async function buscarVemAi() {
            document.getElementById('btn-voltar').style.display = 'block';
            const h = new Date().toISOString().split('T')[0];
            const f = `&primary_release_date.gte=${h}&first_air_date.gte=${h}&sort_by=primary_release_date.asc`;
            carregarDados('movie', 'grid-filmes', f); carregarDados('tv', 'grid-series', f);
        }

        init();
    </script>
</body>
</html>